---
import generateUrlPath from "@utils/generateUrlPath";
import WidgetTitle from "./WidgetTitle.astro";
import StarIcon from "./icons/StarIcon.astro";

interface Props {
  anime: {
    days: {
      day: string;
      animeList: AnimeCard4[];
    }[];
    baseUrlPath: string;
  };
}

const {
  anime: { days, baseUrlPath },
} = Astro.props;
---

<div class="flex flex-col gap-4">
  {
    days.map((day) => (
      <>
        <WidgetTitle title={day.day} />
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
          {day.animeList.map((anime) => (
            <>
              <a
                href={generateUrlPath(baseUrlPath, anime.animeId)}
                class="group rounded-lg relative"
              >
                <div class="relative">
                  <img
                    class="anime2-item-img"
                    data-src={anime.poster}
                    alt={anime.title}
                    src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 600'%3E%3Crect fill='%23374151' width='400' height='600'/%3E%3C/svg%3E"
                  />
                  <span class="anime2-item-type">{anime.type}</span>
                  <span class="anime2-item-score">
                    <StarIcon class="w-[12px] h-[12px]" />
                    <span>{anime.score}</span>
                  </span>
                  <span class="anime2-item-status">{anime.estimation}</span>
                </div>
                <div class="p-2">
                  <h3 class="anime2-item-title">{anime.title}</h3>
                </div>
              </a>
              <div class="hidden">{anime.genres}</div>
            </>
          ))}
        </div>
      </>
    ))
  }
</div>
